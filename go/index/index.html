<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="学习各种前端知识，htm/css/js、http基本知识、vue/react等前端流行框架"><title>零基础学习Go | liuchuanyang前端博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">零基础学习Go</h1><a id="logo" href="/.">liuchuanyang前端博客</a><p class="description">前端学习</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">零基础学习Go</h1><div class="post-meta">Jan 14, 2020<span> | </span><span class="category"><a href="/categories/后台/">后台</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a class="disqus-comment-count" data-disqus-identifier="go/index/" href="/go/index/#disqus_thread"></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contenidos</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#基础语法"><span class="toc-number">1.</span> <span class="toc-text">基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#变量定义"><span class="toc-number">1.1.</span> <span class="toc-text">变量定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量类型"><span class="toc-number">1.2.</span> <span class="toc-text">变量类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常量"><span class="toc-number">1.3.</span> <span class="toc-text">常量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件语句"><span class="toc-number">1.4.</span> <span class="toc-text">条件语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环"><span class="toc-number">1.5.</span> <span class="toc-text">循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数"><span class="toc-number">1.6.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指针"><span class="toc-number">1.7.</span> <span class="toc-text">指针</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#内建容器"><span class="toc-number">2.</span> <span class="toc-text">内建容器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#数组、切片、容器"><span class="toc-number">2.1.</span> <span class="toc-text">数组、切片、容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数组"><span class="toc-number">2.1.1.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#切片"><span class="toc-number">2.1.2.</span> <span class="toc-text">切片</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map"><span class="toc-number">2.2.</span> <span class="toc-text">Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Map的基础"><span class="toc-number">2.2.1.</span> <span class="toc-text">Map的基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map的例题"><span class="toc-number">2.2.2.</span> <span class="toc-text">Map的例题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符和字符串"><span class="toc-number">2.3.</span> <span class="toc-text">字符和字符串</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#面向对象"><span class="toc-number">3.</span> <span class="toc-text">面向对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面向对象-1"><span class="toc-number">3.1.</span> <span class="toc-text">面向对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#结构"><span class="toc-number">3.1.1.</span> <span class="toc-text">结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#结构的创建"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">结构的创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用指针作为方法接收者"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">使用指针作为方法接收者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#值接收者VS指针接收者"><span class="toc-number">3.1.1.3.</span> <span class="toc-text">值接收者VS指针接收者</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#封装"><span class="toc-number">3.1.2.</span> <span class="toc-text">封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#包"><span class="toc-number">3.1.3.</span> <span class="toc-text">包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#如何扩展系统类型或者别人的类型"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">如何扩展系统类型或者别人的类型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GOPATH-环境变量"><span class="toc-number">4.</span> <span class="toc-text">GOPATH 环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#GOPATH"><span class="toc-number">4.1.</span> <span class="toc-text">GOPATH</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go-get-获取第三方库"><span class="toc-number">4.2.</span> <span class="toc-text">go get 获取第三方库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#接口"><span class="toc-number">5.</span> <span class="toc-text">接口</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#duck-typing"><span class="toc-number">5.1.</span> <span class="toc-text">duck typing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#duck-typing基本概念"><span class="toc-number">5.1.1.</span> <span class="toc-text">duck typing基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他语言中的duck-typing"><span class="toc-number">5.1.2.</span> <span class="toc-text">其他语言中的duck typing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接口的定义"><span class="toc-number">5.2.</span> <span class="toc-text">接口的定义</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#函数-1"><span class="toc-number">6.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#闭包"><span class="toc-number">6.1.</span> <span class="toc-text">闭包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数式编程"><span class="toc-number">6.2.</span> <span class="toc-text">函数式编程</span></a></li></ol></li></ol></div></div><div class="post-content"><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="变量定义"><a href="#变量定义" class="headerlink" title="变量定义"></a>变量定义</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> int <span class="comment">// 变量名在前 类型在后</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> (</span><br><span class="line">    <span class="selector-tag">a</span> int = <span class="number">3</span></span><br><span class="line">    <span class="selector-tag">b</span> int =<span class="number">4</span></span><br><span class="line">) <span class="comment">// 使用中括号避免多次使用var</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>, <span class="selector-tag">b</span>, c := <span class="number">3</span>, <span class="string">"abc"</span>, true <span class="comment">// 使用冒号定义变量</span></span><br></pre></td></tr></table></figure>

<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><ul>
<li><p>变量类型</p>
<ul>
<li><p>变量类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>  <span class="keyword">int8</span>  <span class="keyword">int16</span>  <span class="keyword">int32</span>  <span class="keyword">int64</span></span><br><span class="line"><span class="keyword">uint</span> <span class="keyword">uint8</span> <span class="keyword">uint16</span> <span class="keyword">uint32</span> <span class="keyword">uint64</span> <span class="keyword">uintptr</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> <span class="comment">// uint8 的别名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">rune</span> <span class="comment">// int32 的别名</span></span><br><span class="line">    <span class="comment">// 代表一个Unicode码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float32</span> <span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">complex64</span> <span class="keyword">complex128</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>原生支持复数 i</p>
</li>
<li><p>GO强制类型转换</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func triangle()  &#123;</span><br><span class="line">    <span class="selector-tag">var</span> <span class="selector-tag">a</span>, <span class="selector-tag">b</span> int = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    <span class="selector-tag">var</span> c int</span><br><span class="line">    c = int(math.Sqrt(float64(a*<span class="selector-tag">a</span> + b*b)))</span><br><span class="line">    fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><ul>
<li>const数值可作为各种类型使用 (没有规定类型)</li>
<li>编译器可推算变量类型</li>
<li>iota 自增值</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="literal">iota</span></span><br><span class="line">    b</span><br><span class="line">    c</span><br><span class="line">    d</span><br><span class="line">)</span><br><span class="line">fmt.Println(a, b, c, d) <span class="comment">// 0，1，2，3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iota 可以作为一个表达式参与运算</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    a = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">    b</span><br><span class="line">    c</span><br><span class="line">    d</span><br><span class="line">)</span><br><span class="line">fmt.Println(a, b, c, d) <span class="comment">// 1 1024 1048576 1073741824</span></span><br></pre></td></tr></table></figure>

<h2 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h2><ul>
<li><p>if语句</p>
<ul>
<li>if 条件没有括号</li>
<li>if 条件里可以赋值</li>
<li>if 条件可以多条语句用’;’分隔开</li>
<li>if 条件里赋值的变量作用域就在这个if语句块里<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">const</span> filename = <span class="string">"abc.txt"</span></span><br><span class="line"><span class="keyword">if</span> contents, <span class="keyword">err</span> := ioutil.ReadFile(filename); <span class="keyword">err</span> != nil &#123;</span><br><span class="line">	fmt.Println(<span class="keyword">err</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%s\n"</span>,contents)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>switch 语句</p>
<ul>
<li>switch 会自动break, 除非使用fallthrough</li>
<li>switch 后面没有表达式<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">grade</span><span class="params">(score <span class="keyword">int</span>)</span> <span class="title">string</span></span>  &#123;</span><br><span class="line">    g := <span class="string">""</span></span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">0</span> || score &gt; <span class="number">100</span>:</span><br><span class="line">        <span class="built_in">panic</span>(fmt.Sprint(</span><br><span class="line">            <span class="string">"wrong score: %d"</span>, score)) <span class="comment">// 打印报错信息</span></span><br><span class="line">    <span class="keyword">case</span> score &lt; <span class="number">60</span>:</span><br><span class="line">        g = <span class="string">"F"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> g</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><ul>
<li>for<ul>
<li>for 的条件里不需要括号</li>
<li>for 的条件里可以省略初始条件、结束条件、递增表达式<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">converToBin</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">string</span></span>  &#123;</span><br><span class="line">	result := <span class="string">""</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> ; n &gt; <span class="number">0</span>; n/=<span class="number">2</span> &#123;</span><br><span class="line">		lsb := n%<span class="number">2</span></span><br><span class="line">		result = strconv.Itoa(lsb) + result</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>func<ul>
<li>返回值类型写在最后面</li>
<li>可返回多个值</li>
<li>函数可作为参数</li>
<li>没有默认参数，可选参数</li>
<li>可变参数<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math"</span></span><br><span class="line">    <span class="string">"reflect"</span></span><br><span class="line">    <span class="string">"runtime"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">eval</span><span class="params">(a, b <span class="keyword">int</span>, op <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> op &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"+"</span>:</span><br><span class="line">        <span class="keyword">return</span> a + b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"-"</span>:</span><br><span class="line">        <span class="keyword">return</span> a - b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"*"</span>:</span><br><span class="line">        <span class="keyword">return</span> a * b, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"/"</span>:</span><br><span class="line">        q, _ := div(a, b)</span><br><span class="line">        <span class="keyword">return</span> q, <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, fmt.Errorf(</span><br><span class="line">            <span class="string">"unsupported operation: %s"</span>, op)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">div</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(q, r <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a / b, a % b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(op <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">a</span>, <span class="title">b</span> <span class="title">int</span>) <span class="title">int</span></span> &#123;</span><br><span class="line">    p := reflect.ValueOf(op).Pointer()</span><br><span class="line">    opName := runtime.FuncForPC(p).Name()</span><br><span class="line">    fmt.Printf(<span class="string">"Calling function %s with args "</span>+</span><br><span class="line">        <span class="string">"(%d, %d)\n"</span>, opName, a, b)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> op(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可变参数列表</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(numbers ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    s := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> numbers &#123;</span><br><span class="line">        s += numbers[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 交换两个传入的变量</span></span><br><span class="line"><span class="comment">// 返回值并重新赋值(推荐)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> b, a</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 利用指针传值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapT</span><span class="params">(a,b *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    *b, *a = *a, *b</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"Error handling"</span>)</span><br><span class="line">    <span class="keyword">if</span> result, err := eval(<span class="number">3</span>, <span class="number">4</span>, <span class="string">"x"</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Error:"</span>, err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(result)</span><br><span class="line">    &#125;</span><br><span class="line">    q, r := div(<span class="number">13</span>, <span class="number">3</span>)</span><br><span class="line">    fmt.Printf(<span class="string">"13 div 3 is %d mod %d\n"</span>, q, r)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"pow(3, 4) is:"</span>, apply(</span><br><span class="line">        <span class="function"><span class="keyword">func</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">int</span>(math.Pow(</span><br><span class="line">                <span class="keyword">float64</span>(a), <span class="keyword">float64</span>(b)))</span><br><span class="line">        &#125;, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"1+2+...+5 ="</span>, sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">    a, b := <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">    a, b = swap(a, b)</span><br><span class="line">    fmt.Println(<span class="string">"a, b after swap is:"</span>, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><ul>
<li><p>指针</p>
<ul>
<li>不能运算</li>
<li>参数传递<ul>
<li>值传递(只是拷贝值不改变原始变量)</li>
</ul>
  <strong>GO语言参数传递只有值传递这一种方式</strong><ul>
<li>引用传递<br>&amp;a是指向a的地址<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pass_by_val</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    a++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pass_by_ref</span><span class="params">(<span class="keyword">int</span>&amp; a)</span> </span>&#123;</span><br><span class="line">    a++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">3</span></span><br><span class="line">    </span><br><span class="line">    pass_by_val(a) <span class="comment">// 3 值传递</span></span><br><span class="line">    pass_by_ref(a) <span class="comment">// 4 引用传递</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>&amp; 和 * 的区别</p>
<ul>
<li>&amp; 是取地址符号 , 即取得某个变量的地址 , 如 ; &amp;a</li>
<li><em>是指针运算符 , 可以表示一个变量是*</em>指针类型** , 也可以表示一个指针变量所指向的存储单元 , 也就是这个地址所存储的值 .<h1 id="内建容器"><a href="#内建容器" class="headerlink" title="内建容器"></a>内建容器</h1><h2 id="数组、切片、容器"><a href="#数组、切片、容器" class="headerlink" title="数组、切片、容器"></a>数组、切片、容器</h2><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3></li>
<li>数量写在类型前</li>
<li>数组是值类型</li>
<li>[10]int 和 [20]int 是不同的类型</li>
<li>go 语言中不直接使用数组而是使用切片<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArry</span><span class="params">(arr [5]<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    <span class="keyword">for</span> i, v  := <span class="keyword">range</span> arr &#123;</span><br><span class="line">        fmt.Println(i, v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指针传递</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArrayPoint</span><span class="params">(arr *[5]<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    <span class="keyword">for</span> i, v  := <span class="keyword">range</span> arr &#123;</span><br><span class="line">        fmt.Println(i, v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> arr1 [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">    arr2 := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>&#125;</span><br><span class="line">    arr3 := [...]<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125; <span class="comment">// 使用... 让编辑器计算个数</span></span><br><span class="line">    <span class="keyword">var</span> grid [<span class="number">4</span>][<span class="number">5</span>]<span class="keyword">int</span> <span class="comment">// 四行五列</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(arr1, arr2, arr3, grid)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr2); i ++ &#123;</span><br><span class="line">        fmt.Println(arr2[i])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用range 关键字</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> arr2 &#123;</span><br><span class="line">        fmt.Println(arr2[i])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, v  := <span class="keyword">range</span> arr2 &#123;</span><br><span class="line">        fmt.Println(i, v)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用_占位符 省略变量</span></span><br><span class="line">    <span class="keyword">for</span> _, v  := <span class="keyword">range</span> arr2 &#123;</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"printArry: arr3"</span>)</span><br><span class="line">    printArry(arr3)</span><br><span class="line">    fmt.Println(arr3) <span class="comment">// arr3[0] 没有改变 [2 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"printArry: arr3"</span>)</span><br><span class="line">    printArrayPoint(&amp;arr3)</span><br><span class="line">    fmt.Println(arr3) <span class="comment">// arr3[0] 改变 [100 4 5 6 7]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><ul>
<li><p>slice(切片)</p>
<ul>
<li>slice 本身没有数据，是对底层array的一个view</li>
<li>可以进行Reslice</li>
<li>slice扩展<br>  <strong>可以向前扩展，不可以向后扩展</strong><br><img src="/go/index/slice_one.png" alt="slice扩展"></li>
<li>slice实现<ul>
<li>ptr: slice取值的开端（ptr(s)）</li>
<li>len: slice长度(len(s))</li>
<li>cap: 数组(cap(s))</li>
</ul>
  <strong>s[i]不可以超过len(s)，向后扩展不可以超过底层狐族cap(s)</strong><br><img src="/go/index/slice_two.png" alt="slice实现"></li>
<li>向slice添加元素<ul>
<li>添加元素如果超过cap, 系统会重新分配更大的底层数组（go语言采用垃圾回收机制，原来的数组如果不再被使用则会被垃圾回收）</li>
<li>由于值传递的关系，必须接收append的返回值（s = append(s, val)）<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">updateSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">    s[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    arr := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">    s :=  arr[<span class="number">2</span>:<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"arr[2:6]="</span>, s) <span class="comment">// [3 4 5 6]</span></span><br><span class="line">    fmt.Println(<span class="string">"arr[:6]="</span>, arr[:<span class="number">6</span>]) <span class="comment">// [1 2 3 4 5 6]</span></span><br><span class="line"></span><br><span class="line">    s1 := arr[<span class="number">2</span>:]</span><br><span class="line">    fmt.Println(<span class="string">"arr[2:]="</span>, arr[<span class="number">2</span>:]) <span class="comment">// [3 4 5 6 7 8 9]</span></span><br><span class="line">    s2 := arr[:]</span><br><span class="line">    fmt.Println(<span class="string">"arr[:]="</span>, arr[:]) <span class="comment">// [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">    updateSlice(s1)</span><br><span class="line">    fmt.Println(s1) <span class="comment">// [100 4 5 6 7 8 9]</span></span><br><span class="line">    fmt.Println(arr)<span class="comment">// 改变了arr [1 2 100 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">    updateSlice(s2)</span><br><span class="line">    fmt.Println(s2)<span class="comment">//[100 2 100 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Reslice"</span>)</span><br><span class="line">    s2 = s2[<span class="number">2</span>:] <span class="comment">// [100 4 5 6 7 8 9]</span></span><br><span class="line">    fmt.Println(s2)</span><br><span class="line">    s2 = s2[:<span class="number">5</span>] <span class="comment">// [100 4 5 6 7]</span></span><br><span class="line">    fmt.Println(s2)</span><br><span class="line"></span><br><span class="line">    s3 := <span class="built_in">append</span>(s2, <span class="number">10</span>)</span><br><span class="line">    s4 := <span class="built_in">append</span>(s3, <span class="number">11</span>)</span><br><span class="line">    s5 := <span class="built_in">append</span>(s4, <span class="number">12</span>)</span><br><span class="line">    fmt.Println(<span class="string">"s3, s4, s5 ="</span>, s3, s4, s5) <span class="comment">// s3, s4, s5 = [100 4 5 6 7 10] [100 4 5 6 7 10 11] [100 4 5 6 7 10 11 12]</span></span><br><span class="line">    <span class="comment">// s5 no longer view arr</span></span><br><span class="line">    fmt.Println(<span class="string">"arr="</span>, arr) <span class="comment">// arr= [100 2 100 4 5 6 7 10 11]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>切片操作</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"%v, len=%d, cap=%d\n"</span>,</span><br><span class="line">        s, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sliceOps</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"Creating slice"</span>)</span><br><span class="line">    <span class="keyword">var</span> s []<span class="keyword">int</span> <span class="comment">// Zero value for slice is nil</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">        printSlice(s)</span><br><span class="line">        s = <span class="built_in">append</span>(s, <span class="number">2</span>*i+<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(s)</span><br><span class="line"></span><br><span class="line">    s1 := []<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;</span><br><span class="line">    printSlice(s1)</span><br><span class="line"></span><br><span class="line">    s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">16</span>)</span><br><span class="line">    s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>, <span class="number">32</span>)</span><br><span class="line">    printSlice(s2)</span><br><span class="line">    printSlice(s3)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Copying slice"</span>)</span><br><span class="line">    <span class="built_in">copy</span>(s2, s1)</span><br><span class="line">    printSlice(s2)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Deleting elements from slice"</span>)</span><br><span class="line">    s2 = <span class="built_in">append</span>(s2[:<span class="number">3</span>], s2[<span class="number">4</span>:]...)</span><br><span class="line">    printSlice(s2)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Popping from front"</span>)</span><br><span class="line">    front := s2[<span class="number">0</span>]</span><br><span class="line">    s2 = s2[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">    fmt.Println(front)</span><br><span class="line">    printSlice(s2)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">"Popping from back"</span>)</span><br><span class="line">    tail := s2[<span class="built_in">len</span>(s2)<span class="number">-1</span>]</span><br><span class="line">    s2 = s2[:<span class="built_in">len</span>(s2)<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    fmt.Println(tail)</span><br><span class="line">    printSlice(s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="Map的基础"><a href="#Map的基础" class="headerlink" title="Map的基础"></a>Map的基础</h3><ul>
<li><p>Map的定义</p>
<ul>
<li>map[k]v, map[k1]map[k2]v</li>
<li>make(map(k)v)</li>
<li>获取元素m[k]</li>
<li>当key 不存在时，获取Value类型的初始值</li>
<li>用value, ok := m[key]来判断是否存在key <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">	<span class="string">"name"</span>:    <span class="string">"ccmouse"</span>,</span><br><span class="line">	<span class="string">"course"</span>:  <span class="string">"golang"</span>,</span><br><span class="line">	<span class="string">"site"</span>:    <span class="string">"imooc"</span>,</span><br><span class="line">	<span class="string">"quality"</span>: <span class="string">"notbad"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>) <span class="comment">// m2 == empty map</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m3 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span> <span class="comment">// m3 == nil</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"m, m2, m3:"</span>)</span><br><span class="line">fmt.Println(m, m2, m3) <span class="comment">// map[course:golang name:ccmouse quality:notbad site:imooc] map[] map[]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Map的遍历</p>
<ul>
<li>使用range 遍历</li>
<li>不保证遍历顺序，如需顺序，需手动对key 排序</li>
<li>用len获取元素个数<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   fmt.Println(<span class="string">"Traversing map m"</span>)</span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">	fmt.Println(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Map 操作</p>
<ul>
<li>map使用hash表，必须可以比较相等</li>
<li>除了slice、map、function的内建类型都可以作为key</li>
<li>Struct类型不包含上述字段，也可以作为key<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">   fmt.Println("Getting <span class="keyword">values</span><span class="string">")</span></span><br><span class="line"><span class="string">courseName := m["</span>course<span class="string">"]</span></span><br><span class="line"><span class="string">fmt.Println(`m["</span>course<span class="string">"] =`, courseName)</span></span><br><span class="line"><span class="string">if causeName, ok := m["</span>cause<span class="string">"]; ok &#123;</span></span><br><span class="line"><span class="string">	fmt.Println(causeName)</span></span><br><span class="line"><span class="string">&#125; else &#123;</span></span><br><span class="line"><span class="string">	fmt.Println("</span><span class="keyword">key</span> <span class="string">'cause'</span> does <span class="keyword">not</span> exist<span class="string">")</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">fmt.Println("</span>Deleting <span class="keyword">values</span><span class="string">")</span></span><br><span class="line"><span class="string">name, ok := m["</span><span class="keyword">name</span><span class="string">"]</span></span><br><span class="line"><span class="string">fmt.Printf("</span>m[%q] <span class="keyword">before</span> <span class="keyword">delete</span>: %q, %v\n<span class="string">",</span></span><br><span class="line"><span class="string">	"</span><span class="keyword">name</span><span class="string">", name, ok)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">delete(m, "</span><span class="keyword">name</span><span class="string">")</span></span><br><span class="line"><span class="string">name, ok = m["</span><span class="keyword">name</span><span class="string">"]</span></span><br><span class="line"><span class="string">fmt.Printf("</span>m[%q] <span class="keyword">after</span> <span class="keyword">delete</span>: %q, %v\n<span class="string">",</span></span><br><span class="line"><span class="string">	"</span><span class="keyword">name</span><span class="string">", name, ok)</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="Map的例题"><a href="#Map的例题" class="headerlink" title="Map的例题"></a>Map的例题</h3><ul>
<li>寻找最长不含有重复字符的子串</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不能处理中文 只能处理ASCII码 </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfNonReaptingSubStr</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span>  &#123;</span><br><span class="line">	lastOccurred := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">byte</span>]<span class="keyword">int</span>)</span><br><span class="line">	start := <span class="number">0</span></span><br><span class="line">	maxlength := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	str := []<span class="keyword">byte</span>(s)</span><br><span class="line"></span><br><span class="line">	fmt.Println(str)</span><br><span class="line">	<span class="keyword">for</span> i, ch := <span class="keyword">range</span> str &#123;</span><br><span class="line">		lastI, ok := lastOccurred[ch]</span><br><span class="line">		<span class="keyword">if</span> ok &amp;&amp; lastI  &gt;= start &#123;</span><br><span class="line">			start = lastI + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> i - start + <span class="number">1</span> &gt; maxlength &#123;</span><br><span class="line">			maxlength = i - start + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		lastOccurred[ch] = i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>  maxlength</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 国际版 使用rune</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfNonRepeatingSubStr</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	lastOccurred := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">rune</span>]<span class="keyword">int</span>)</span><br><span class="line">	start := <span class="number">0</span></span><br><span class="line">	maxLength := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i, ch := <span class="keyword">range</span> []<span class="keyword">rune</span>(s) &#123;</span><br><span class="line">		<span class="keyword">if</span> lastI, ok := lastOccurred[ch]; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">			start = lastI + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> i-start+<span class="number">1</span> &gt; maxLength &#123;</span><br><span class="line">			maxLength = i - start + <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">		lastOccurred[ch] = i</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> maxLength</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="字符和字符串"><a href="#字符和字符串" class="headerlink" title="字符和字符串"></a>字符和字符串</h2><ul>
<li>使用range 遍历 pos, rune(位置，值)对</li>
<li>使用 utf8.RuneCountInString()获得字符数量</li>
<li>使用len 获取字节长度</li>
<li>使用[]byte获得字节</li>
<li>字符串其他操作（strings包）<ul>
<li>Fields、Split、Join<br>  Fields 以连续的空白字符为分隔符，将 s 切分成多个子串，结果中不包含空白字符本身</li>
<li>Contains、Index</li>
<li>ToLower、ToUpper</li>
<li>Trim、TrimRight、TrimLeft<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"unicode/utf8"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">"Yes我爱慕课网!"</span> <span class="comment">// UTF-8</span></span><br><span class="line">	fmt.Println(s)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, b := <span class="keyword">range</span> []<span class="keyword">byte</span>(s) &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"%X "</span>, b)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i, ch := <span class="keyword">range</span> s &#123; <span class="comment">// ch is a rune</span></span><br><span class="line">		fmt.Printf(<span class="string">"(%d %X) "</span>, i, ch)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"Rune count:"</span>,</span><br><span class="line">		utf8.RuneCountInString(s))</span><br><span class="line"></span><br><span class="line">	bytes := []<span class="keyword">byte</span>(s)</span><br><span class="line">	fmt.Println(bytes)</span><br><span class="line">	<span class="keyword">for</span> <span class="built_in">len</span>(bytes) &gt; <span class="number">0</span> &#123;</span><br><span class="line">		ch, size := utf8.DecodeRune(bytes)</span><br><span class="line">		bytes = bytes[size:]</span><br><span class="line">		fmt.Printf(<span class="string">"%c "</span>, ch)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i, ch := <span class="keyword">range</span> []<span class="keyword">rune</span>(s) &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"(%d %c) "</span>, i, ch)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="面向对象-1"><a href="#面向对象-1" class="headerlink" title="面向对象"></a>面向对象</h2><ul>
<li>go 仅支持封装，不支持继承和多态</li>
<li>go 语言没有class, 只有struct</li>
</ul>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><h4 id="结构的创建"><a href="#结构的创建" class="headerlink" title="结构的创建"></a>结构的创建</h4><ul>
<li>使用自定义工厂函数</li>
<li>注意返回了局部变量的地址</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">type treeNode <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">	value int</span><br><span class="line">	<span class="keyword">left</span>, <span class="keyword">right</span> *treeNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义工厂函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createNode</span><span class="params">(val int)</span></span> *treeNode  &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;treeNode&#123;value: val&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span>  root treeNode</span><br><span class="line">	root.<span class="keyword">left</span> = &amp;treeNode&#123;&#125;</span><br><span class="line">	root.<span class="keyword">right</span> = &amp;treeNode&#123;<span class="number">5</span>, <span class="literal">nil</span>, <span class="literal">nil</span> &#125;</span><br><span class="line">	root.<span class="keyword">right</span>.<span class="keyword">left</span> = new(treeNode)</span><br><span class="line">	root.<span class="keyword">left</span>.<span class="keyword">right</span> = createNode(<span class="number">2</span>)</span><br><span class="line">	fmt.<span class="type">Println</span>(root)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用指针作为方法接收者"><a href="#使用指针作为方法接收者" class="headerlink" title="使用指针作为方法接收者"></a><strong>使用指针作为方法接收者</strong></h4><ul>
<li><p>只有使用指针才能改变结构内容</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func (<span class="keyword">node</span> <span class="title">*treeNode</span>) setValue(value int)  &#123;</span><br><span class="line">	<span class="keyword">node</span>.<span class="title">value</span> = value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>nil指针也可以调用此方法</p>
</li>
</ul>
<h4 id="值接收者VS指针接收者"><a href="#值接收者VS指针接收者" class="headerlink" title="值接收者VS指针接收者"></a><strong>值接收者VS指针接收者</strong></h4><ul>
<li>要改变内容必须使用指针接收者</li>
<li>结构过大也考虑使用指针接收者</li>
<li>建议一致性：如果有指针接收者，最好都是指针接收者</li>
<li>值接收者是Go 语言特有</li>
<li>值/指针接收者均可接收值/指针</li>
</ul>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><ul>
<li>名字一般使用CamelCase(单词首字母大写)</li>
<li>首字母大写： public (针对包而言)</li>
<li>首字母小写： private (针对包而言)</li>
</ul>
<h3 id="包"><a href="#包" class="headerlink" title="包"></a>包</h3><ul>
<li>每个目录只有一个包</li>
<li>main包 包含可执行入口（main 函数）</li>
<li>为结构定义的方法必须放在同一个包内，但是可以是<strong>不同的文件</strong></li>
</ul>
<h4 id="如何扩展系统类型或者别人的类型"><a href="#如何扩展系统类型或者别人的类型" class="headerlink" title="如何扩展系统类型或者别人的类型"></a>如何扩展系统类型或者别人的类型</h4><ul>
<li>定义别名<br>例子文件夹queue</li>
<li>使用组合<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用组合方式</span></span><br><span class="line"><span class="keyword">type</span> myTreeNode <span class="keyword">struct</span> &#123;</span><br><span class="line">	node *tree.TreeNode <span class="comment">// 不一定是指针也可以是具体的类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(myNode *myTreeNode)</span> <span class="title">postOrder</span><span class="params">()</span></span>  &#123;</span><br><span class="line">	<span class="keyword">if</span> myNode == <span class="literal">nil</span> || myNode.node == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	left := myTreeNode&#123;myNode.node.Left&#125;</span><br><span class="line">	left.postOrder()</span><br><span class="line">	right := myTreeNode&#123;myNode.node.Right&#125;</span><br><span class="line">	right.postOrder()</span><br><span class="line">	myNode.node.Print()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体的调用方式</span></span><br><span class="line">myRoot := myTreeNode&#123;&amp;root&#125;</span><br><span class="line">myRoot .postOrder()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="GOPATH-环境变量"><a href="#GOPATH-环境变量" class="headerlink" title="GOPATH 环境变量"></a>GOPATH 环境变量</h1><h2 id="GOPATH"><a href="#GOPATH" class="headerlink" title="GOPATH"></a>GOPATH</h2><ul>
<li>默认在~/go(unix,Linx)， %USERPROFILE%\go(windows)<ul>
<li>建议就算使用默认GOPATH也进行相对应的设置</li>
</ul>
</li>
<li>官方推荐：所有项目和第三方库都放在同一个GOPATH下</li>
<li>也可以将每个项目放置在不同的GOPATH下，那么需要给GOPATH 环境变量设置多个值，Go语言编译的时候会找到不同GOPATH中自己所要依赖的包。<ul>
<li>pwd：查看当前所在目录</li>
<li>echo $GOPATH：查看当前项目的GOPATH</li>
<li>cat ~/.bash_profile: 查看环境变量</li>
</ul>
</li>
</ul>
<h2 id="go-get-获取第三方库"><a href="#go-get-获取第三方库" class="headerlink" title="go get 获取第三方库"></a>go get 获取第三方库</h2><ul>
<li>go get 安装gopm</li>
<li>使用gopm 获取无法下载的包</li>
</ul>
<h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><h2 id="duck-typing"><a href="#duck-typing" class="headerlink" title="duck typing"></a>duck typing</h2><h3 id="duck-typing基本概念"><a href="#duck-typing基本概念" class="headerlink" title="duck typing基本概念"></a>duck typing基本概念</h3><ul>
<li>“像鸭子走路，像鸭子叫，长得像鸭子，那么就是鸭子。”</li>
<li>描述事物的外部行为而非内部结构</li>
<li>严格说go属于结构化类型系统，类似duck typing(看法不同)</li>
</ul>
<h3 id="其他语言中的duck-typing"><a href="#其他语言中的duck-typing" class="headerlink" title="其他语言中的duck typing"></a>其他语言中的duck typing</h3><p><a href="https://segmentfault.com/a/1190000019607240" target="_blank" rel="noopener">其他语言中的duck typing</a></p>
<h2 id="接口的定义"><a href="#接口的定义" class="headerlink" title="接口的定义"></a>接口的定义</h2><p>在上面链接的例子里：<br>使用者： download (使用者规定接口必须有什么方法)<br>实现者：fetcher (实现者不需要具体实现某个接口，只需要实现接口里面的方法即可)</p>
<ul>
<li><p>接口由<strong>使用者</strong>定义</p>
<ul>
<li>接口的实现是隐式的</li>
<li>接口只需要实现里面的方法</li>
</ul>
</li>
<li><p>查看接口变量</p>
<ul>
<li>interface{} : 表示任何类型</li>
<li>Type Assertion</li>
<li>Type Switch</li>
</ul>
</li>
<li><p>接口组合</p>
</li>
<li><p>常用系统接口</p>
<ul>
<li>Stringer<br>相当于toString()</li>
<li>Reader</li>
<li>Writer<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main文件</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"lichuanyang65/learngo/retriever/mock"</span></span><br><span class="line">	real2 <span class="string">"lichuanyang65/learngo/retriever/real"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span>  Retriever <span class="keyword">interface</span> &#123;</span><br><span class="line">	Get(url <span class="keyword">string</span>) <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Poster <span class="keyword">interface</span> &#123;</span><br><span class="line">	Post(url <span class="keyword">string</span>, form <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>) <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口的组合</span></span><br><span class="line"><span class="keyword">type</span> RetrieverPoster <span class="keyword">interface</span> &#123;</span><br><span class="line">	Retriever</span><br><span class="line">	Poster</span><br><span class="line">	<span class="comment">// 还可以定义其他的方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">"http://www.baidu.com"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">download</span> <span class="params">(r Retriever)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> r.Get(url)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">post</span> <span class="params">(poster Poster)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> poster.Post(url, <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		<span class="string">"keyWord"</span>: <span class="string">"test"</span>,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用者组合，实现者不需要研究接口如何定义</span></span><br><span class="line"><span class="comment">// 对使用者session 来说实现者RetrieverPoster里面的两个接口如何实现不重要，只需要实现Post 和Get 函数即可</span></span><br><span class="line"><span class="comment">// 而实现者RetrieverPoster 并不需要声明它实现了哪些接口，只要它有相关接口的所定义的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">session</span> <span class="params">(s RetrieverPoster)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	s.Post(url, <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		<span class="string">"keyWord"</span>: <span class="string">"test"</span>,</span><br><span class="line">		<span class="string">"contents"</span>: <span class="string">"another fake test"</span>,</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">return</span> s.Get(url)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> r Retriever</span><br><span class="line">	fmt.Printf(<span class="string">"%T %v\n"</span>, r)</span><br><span class="line"></span><br><span class="line">	r = mock.Retriever&#123;<span class="string">"this is a fake test"</span>&#125; <span class="comment">// 真实的值 值拷贝</span></span><br><span class="line">	<span class="comment">// 如何区分不能类型的r</span></span><br><span class="line">	inspect(r)</span><br><span class="line"></span><br><span class="line">	r = &amp;real2.Retriever&#123;</span><br><span class="line">		<span class="string">"Mozill/5.0"</span>,</span><br><span class="line">		time.Minute,</span><br><span class="line">	&#125; <span class="comment">// 指针*real.Retriever &amp;&#123;Mozill/5.0 1m0s&#125;</span></span><br><span class="line">	<span class="comment">// 因此接口不会再次使用指针，接口内部可能存在已经使用指针的情况</span></span><br><span class="line">	inspect(r)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Type assertion</span></span><br><span class="line">	<span class="comment">// 使用.(具体的类型) 可以取得interface里面的这个类型</span></span><br><span class="line">	<span class="keyword">if</span> mockRetriever, ok := r.(mock.Retriever); ok &#123;</span><br><span class="line">		fmt.Println(mockRetriever.Contents)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"not a mock rettriever"</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	realRetriever := r.(*real2.Retriever)</span><br><span class="line">	fmt.Println(realRetriever.Timeout)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接口组合</span></span><br><span class="line">	<span class="comment">// 同时实现了Get Post</span></span><br><span class="line">	retrieve := mock.Retriever&#123;url&#125;</span><br><span class="line">	s := RetrieverPoster(&amp;retrieve)</span><br><span class="line">	fmt.Println(session(s))</span><br><span class="line">	<span class="comment">//fmt.Println(download(r))</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区分r内部的类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">inspect</span><span class="params">(r Retriever)</span></span>  &#123;</span><br><span class="line">	<span class="keyword">switch</span> v := r.(<span class="keyword">type</span>) &#123;</span><br><span class="line">	<span class="keyword">case</span> mock.Retriever:</span><br><span class="line">		fmt.Println(<span class="string">"Contents:"</span>, v.Contents)</span><br><span class="line">		fmt.Printf(<span class="string">"%T %v\n"</span>, r, r)</span><br><span class="line">	<span class="keyword">case</span> *real2.Retriever:</span><br><span class="line">		fmt.Println(<span class="string">"UserAgent"</span>, v.UserAgent)</span><br><span class="line">		fmt.Printf(<span class="string">"%T %v\n"</span>, r, r)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mock文件</span></span><br><span class="line"><span class="comment">// 这里有些不规范，在一个包里如果使用指针则应该都使用指针</span></span><br><span class="line"><span class="keyword">package</span> mock</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是一个假的 retriever 类似duck typing</span></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">struct</span> &#123;</span><br><span class="line">	Contents <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟实现main 中的retriever 接口的mGet 方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Retriever)</span> <span class="title">Get</span><span class="params">(url <span class="keyword">string</span>)</span> <span class="title">string</span></span>  &#123;</span><br><span class="line">	<span class="keyword">return</span> r.Contents</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 值接收者不会修改值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Retriever)</span> <span class="title">Post</span><span class="params">(url <span class="keyword">string</span>, form <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	r.Contents = form[<span class="string">"contents"</span>]</span><br><span class="line">	<span class="keyword">return</span> r.Contents</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// real</span></span><br><span class="line"><span class="keyword">package</span> <span class="built_in">real</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">	<span class="string">"net/http/httputil"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Retriever <span class="keyword">struct</span> &#123;</span><br><span class="line">	 UserAgent <span class="keyword">string</span></span><br><span class="line">	 Timeout time.Duration</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Retriever)</span> <span class="title">Get</span><span class="params">(url <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	resp, err := http.Get(url)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	result, err := httputil.DumpResponse(resp, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">	resp.Body.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">string</span>(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h1><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>!(闭包)[闭包. png]</p>
<h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2></div><div class="tags"><a href="/tags/Go/">Go</a></div><div class="post-nav"><a class="pre" href="/python/index/">python</a><a class="next" href="/optimize/index/">前端优化体系</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://liuchuanyang65.github.io/go/index/';
    this.page.identifier = 'go/index/';
    this.page.title = '零基础学习Go';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//liuchuanyang.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//liuchuanyang.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://liuchuanyang.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://liuchuanyang65.github.io"></form></div><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="https://liuchuanyang65.github.io"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categorías</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/this/">this</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端优化/">前端优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端面试/">前端面试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/后台/">后台</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂/">杂</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Etiquetas</i></div><div class="tagcloud"><a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/前端面试/" style="font-size: 15px;">前端面试</a> <a href="/tags/Node/" style="font-size: 15px;">Node</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/前端优化/" style="font-size: 15px;">前端优化</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/this/" style="font-size: 15px;">this</a> <a href="/tags/Go/" style="font-size: 15px;">Go</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recientes</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/hit-my-mouse/">hit_my_mouse</a></li><li class="post-list-item"><a class="post-list-link" href="/Node/server/">Node 搭建服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/python/index/">python</a></li><li class="post-list-item"><a class="post-list-link" href="/go/index/">零基础学习Go</a></li><li class="post-list-item"><a class="post-list-link" href="/optimize/index/">前端优化体系</a></li><li class="post-list-item"><a class="post-list-link" href="/Node/index/">Node入门到实际应用</a></li><li class="post-list-item"><a class="post-list-link" href="/http/index/">深入理解HTTP</a></li><li class="post-list-item"><a class="post-list-link" href="/dataStructure/index/">dataStructure</a></li><li class="post-list-item"><a class="post-list-link" href="/interviewQuestion/index/">interviewQuestion</a></li><li class="post-list-item"><a class="post-list-link" href="/httpStatusCode/index/">HTTP 状态码</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近的评论</i></div><script type="text/javascript" src="//liuchuanyang.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">liuchuanyang前端博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>